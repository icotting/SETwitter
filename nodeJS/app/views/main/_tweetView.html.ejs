<div id="feedWarning">
    <% if (!feeds || feeds.length == 0) { %>
    <div class="alert alert-danger alert-dismissable">
        <h4 class="alert-heading">Oh snap! You don't have any feeds!</h4>
        <p>You can't start tweeting until you have at least one feed to post the tweet to. You can view as many tweets as you like, but it won't be nearly as interesting until you can post your own.</p>
    </div>
    <% } else { %>
    <div id="newTweet">
        <!-- the new tweet form is only rendered if there is a feed to post a tweet to -->
        <div>
            <form id="tweetForm">
                <%- selectTag(feeds, selectedFeed, {
                  name: 'postFeed'
                , valueField: 'id'
                , textField: 'name'
                }); %>


                <textarea value="" name="content" style="margin-top: 10px; margin-bottom: 20px; width: 90%; font-size: 16pt"
                  rows="3" placeholder="Compose a new tweet ..."></textarea><br/>
                <!-- AJAX submission similar to the creation of a new feed -->
                <input type="button" onclick="submitTweet()" value="Tweet" class="btn btn-primary"/>
            </form>
            <script type="text/javascript">
              function submitTweet() {
                $.ajax({
                  type: "POST",
                  url: '/tweet/addTweet',
                  data: $("#tweetForm").serialize(), // serializes the form's elements.
                  success: function(data)
                  {
                    $("#tweetView").html(data);
                  }
                });
              }
            </script>
        </div>
    </div>
    <h3>Tweets</h3>
    <!-- iterator for the tweet collection -->
    <div id="tweets">
            <% if (tweets) {
              tweets.forEach(function(tweet) { %>
                <div class="well">
                    <h3>
                        <small>Posted by <%- tweet.author.name %> in
                            <%- tweet.feed.name %> at
                            <span><%- tweet.postdate.toLocaleTimeString() %> on <%- tweet.postdate.toLocaleDateString() %></span>
                        </small><br />
                        <%- tweet.content %>
                    </h3>
                </div>
            <% });} %>
    </div>
    <% } %>
</div>
